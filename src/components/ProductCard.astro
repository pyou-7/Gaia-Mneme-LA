---
const { p } = Astro.props;
---
<div class="card group">
  <a href={`/product/${p.slug}`}>
    <img
      src={p.image}
      alt={p.imageAlt || p.name}
      style="aspect-ratio: 1/1; object-fit: cover; width: 100%; transition: transform .4s ease;"
      class="group-hover:scale-[1.02]"
    />
  </a>
  <div class="card-body">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
      <div>
        <div style="font-weight:600">{p.name}</div>
        <div style="color:#cfd3dc;font-size:14px">{p.stone}</div>
      </div>
      {p.badge && <span class="pill">{p.badge}</span>}
    </div>

    <div style="display:flex;gap:8px;margin:10px 0 14px">
      <strong>${p.price}</strong>
      {p.compareAt && <span style="text-decoration:line-through;color:#9aa3b2">${p.compareAt}</span>}
    </div>

    <div style="display:flex;gap:8px">
      {p.stripeLink
        ? <a class="btn" href={p.stripeLink} rel="noopener noreferrer">Buy now</a>
        : <a class="btn" href="#" aria-disabled="true">Buy (link later)</a>}
      <a class="btn-secondary" href={`/product/${p.slug}`}>Details</a>
    </div>
  </div>
</div>